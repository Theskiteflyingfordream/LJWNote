#### IO会经历两个阶段：

- 等待数据到达内核缓冲区
- 从内核缓冲区拷贝数据到程序缓冲区

### 阻塞型IO

在阻塞 IO 模型里，从硬件到系统内核、从系统内核到程序空间，都是阻塞的。

### 非阻塞 IO 模型

硬件到系统内核，轮询阻塞。系统内核到程序空间，阻塞。

### 复用 IO 模型

硬件到系统内核，多流轮询阻塞。系统内核到程序空间，阻塞。

### 信号驱动 IO 模型（x）

信号驱动 IO 在第一阶段，即数据到达内核缓冲区之前，进程是不阻塞的，而是设置一个信号回调。当数据到达内核缓冲区之后，内核调用程序的回调。通过这种方式，信号驱动 IO 下的进程就可以不阻塞，可以去做其他事情了。

而当进程收到信号，进程再将数据从内核缓冲区复制到程序缓冲区。这个过程与上面几个是完全一样的，同样也是阻塞的。

（硬件到系统内核，信号回调不阻塞。系统内核到程序空间，阻塞。）

### 异步 IO 模型

信号驱动 IO 类似，异步 IO 模型通过信号回调的方式，在第一个阶段实现了进程的非阻塞。而当数据到达内核缓冲区之后，进程便会收到通知。而当进程收到通知之后，进程再次将数据从内核缓冲区复制到进程缓冲区，但这时进程并不等待，而是同样设置一个信号回调。当复制完成后，进程收到通知，再进行相应的处理。

硬件到系统内核，信号回调不阻塞。系统内核到程序空间，信号回调不阻塞。

https://mp.weixin.qq.com/s/TbIPlBtkK_zCyt54cCX8dw



### 直接IO与非直接IO

直接 I/O，不会发⽣内核缓存和⽤户程序之间数据复制，⽽是直接经过⽂件系统访问磁盘。

⾮直接 I/O，读操作时，数据从内核缓存（Page Cache）中拷⻉给⽤户程序，写操作时，数据从⽤户程序拷⻉给内核缓存，再由内核决定什么时候写⼊数据到磁盘。

